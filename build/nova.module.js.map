{"version":3,"file":"nova.module.js","sources":["../src/error/NotFunctionError.js","../src/core/LoopManager.js","../src/events/EventManager.js","../src/core/World.js","../src/constant.js","../src/core/VR.js","../src/effect/EffectFactory.js","../src/core/App.js","../src/core/Transitioner.js","../src/events/Signal.js","../src/events/Events.js","../src/util/extends.js","../src/util/rndInt.js","../src/util/rndString.js","../src/util/Util.js","../src/Nova.js"],"sourcesContent":["let NotFunctionError = class extends Error {\r\n  constructor( message ) {\r\n    super( message );\r\n    this.name = 'NotFunctionError';\r\n    this.message = message || 'The object is not a function.';\r\n  }\r\n};\r\n\r\nexport {\r\n  NotFunctionError\r\n};","import { NotFunctionError } from './../error/NotFunctionError.js';\r\n\r\nclass LoopManager {\r\n  constructor(cycleLevel = 1) {\r\n    //记录循环次数\r\n    this.times = 0;\r\n    //每隔多少循环执行一次update，用于调整fps。数字越大，fps越低\r\n    this.cycleLevel = cycleLevel <= 0 ? 1 : cycleLevel;\r\n    this.functionMap = new Map();\r\n  }\r\n\r\n  update(time) {\r\n    if (this.times % this.cycleLevel !== 0) {\r\n      return;\r\n    }\r\n    this.functionMap.forEach((value) => {\r\n      value();\r\n    });\r\n  }\r\n\r\n  add(func, key) {\r\n    if (typeof func !== 'function') {\r\n      throw new NotFunctionError();\r\n    } else {\r\n      if (key) {\r\n        this.functionMap.set(key, func);\r\n      } else {\r\n        key = Symbol();\r\n        this.functionMap.set(key, func);\r\n        return key;\r\n      }\r\n    }\r\n  }\r\n\r\n  remove(funcOrKey) {\r\n    if (typeof funcOrKey === 'function') {\r\n      this.functionMap.forEach((value, key) => {\r\n        if (value === funcOrKey) {\r\n          return this.functionMap.delete(key);\r\n        }\r\n      });\r\n      return false;\r\n    } else {\r\n      return this.functionMap.delete(funcOrKey);\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  LoopManager\r\n};","class EventManager {\r\n  constructor(world) {\r\n    try {\r\n    \tif(Hammer===undefined){\r\n    \t\treturn;\r\n    \t}\r\n    } catch (e) {\r\n      console.warn('Hammer没有引入导致鼠标或触屏事件功能无法使用。Nova的事件引擎依赖Hammer。');\r\n      return;\r\n    }\r\n    \r\n    world.eventManager = this;\r\n    this.world = world;\r\n    this.isDeep = true;\r\n    this.receivers = world.receivers;\r\n    this.raycaster = new THREE.Raycaster();\r\n    this.centerRaycaster = new THREE.Raycaster();\r\n    this.selectedObj = null;\r\n    this.centerSelectedObj = null;\r\n    this.isDetectingEnter = true;\r\n    this.hammer = new Hammer(world.app.renderer.domElement);\r\n    this.hammer.on('pan press tap pressup', (event) => {\r\n      this.raycastCheck(event);\r\n    });\r\n  }\r\n\r\n  raycastCheck(event) {\r\n    let vec2 = new THREE.Vector2(event.center.x / this.world.app.getWorldWidth() *\r\n      2 - 1, event.center.y / this.world.app.getWorldHeight() * 2 - 1);\r\n    this.raycaster.setFromCamera(vec2, this.world.camera);\r\n    let intersects = this.raycaster.intersectObjects(this.world.receivers,\r\n      this.isDeep);\r\n\r\n    let intersect;\r\n    for (let i = 0; i < intersects.length; i++) {\r\n      if (intersects[i].object.isPenetrated) {\r\n        continue;\r\n      } else {\r\n        intersect = intersects[i];\r\n        break;\r\n      }\r\n    }\r\n    if (intersect) {\r\n      intersect.object.events[event.type].run(event, intersect);\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport {\r\n  EventManager\r\n};","import { LoopManager } from './LoopManager.js';\r\nimport { EventManager } from './../events/EventManager';\r\n\r\nclass World {\r\n  constructor(app, camera, clearColor) {\r\n    this.app = app;\r\n    this.scene = new THREE.Scene();\r\n    this.logicLoop = new LoopManager();\r\n    this.renderLoop = new LoopManager();\r\n    this.camera = camera || new THREE.PerspectiveCamera(45, app.getWorldWidth() /\r\n      app.getWorldHeight(), 0.01, 1000);\r\n    this.receivers = this.scene.children;\r\n    this.eventManager = new EventManager(this);\r\n    this.renderTargetParameters = {\r\n      minFilter: THREE.LinearFilter,\r\n      magFilter: THREE.LinearFilter,\r\n      format: THREE.RGBFormat,\r\n      stencilBuffer: false\r\n    };\r\n    this.isRTT = false;\r\n    this.clearColor = clearColor || 0;\r\n    this.fbo = new THREE.WebGLRenderTarget(this.app.getWorldWidth(),\r\n      this.app.getWorldHeight(), this.renderTargetParameters);\r\n  }\r\n\r\n  update(time) {\r\n    this.logicLoop.update(time);\r\n    this.renderLoop.update(time);\r\n  }\r\n\r\n  resize(width, height) {\r\n    if (this.camera.type === 'PerspectiveCamera') {\r\n      this.camera.aspect = width / height;\r\n      this.camera.updateProjectionMatrix();\r\n    } else {\r\n      this.camera.left = -width / 2;\r\n      this.camera.right = width / 2;\r\n      this.camera.top = height / 2;\r\n      this.camera.bottom = -height / 2;\r\n      this.camera.updateProjectionMatrix();\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  World\r\n};","const APP_STOP = 0;\r\nconst APP_RUNNING = 1;\r\nconst APP_PAUSE = 2;\r\nconst WORLD_RUNNING = 1;\r\nconst WORLD_PAUSE = 2;\r\nconst VERSION = '0.0.1';\r\n\r\nconsole.log(\"Nova framework for Three.js, version: %c \" + VERSION, \"color:blue\");\r\n\r\nexport {\r\n  APP_STOP,\r\n  APP_RUNNING,\r\n  APP_PAUSE,\r\n  WORLD_RUNNING,\r\n  WORLD_PAUSE\r\n};","class VR {\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.display = undefined;\r\n    this.polyfill = undefined;\r\n    this.isOpenVR = false;\r\n    this.vrEffect = undefined;\r\n    this.getVRDisplay();\r\n    this.createVREffect();\r\n  }\r\n\r\n  createVREffect() {\r\n    if (this.vrEffect) {\r\n      return;\r\n    }\r\n    if (!THREE.VREffect) {\r\n      console.warn(\"未引入VREffect.js，无法创建VR模式。\");\r\n      return;\r\n    }\r\n    this.vrEffect = new THREE.VREffect(this.app.renderer);\r\n    this.vrEffect.setSize(this.app.renderer.domElement.clientWidth,\r\n      this.app.renderer.domElement.clientHeight, false);\r\n    this.vrEffect.isOpened = false;\r\n    this.vrEffect.updateId = Symbol();\r\n  }\r\n\r\n  setPolyfill() {\r\n    if (this.polyfill) {\r\n      return;\r\n    }\r\n    if (!WebVRPolyfill) {\r\n      console.warn(\"未引入WebVRPolyfill.js，无法创建VR兼容模式。\");\r\n      return;\r\n    }\r\n    let config = (function() {\r\n      let config = {};\r\n      let q = window.location.search.substring(1);\r\n      if (q === '') {\r\n        return config;\r\n      }\r\n      let params = q.split('&');\r\n      let param, name, value;\r\n      for (let i = 0; i < params.length; i++) {\r\n        param = params[i].split('=');\r\n        name = param[0];\r\n        value = param[1];\r\n\r\n        // All config values are either boolean or float\r\n        config[name] = value === 'true' ? true :\r\n          value === 'false' ? false :\r\n          parseFloat(value);\r\n      }\r\n      return config;\r\n    })();\r\n    this.polyfill = new WebVRPolyfill(config);\r\n  }\r\n\r\n  getVRDisplay() {\r\n    if (!navigator.getVRDisplays) {\r\n      this.setPolyfill();\r\n    }\r\n    return navigator.getVRDisplays()\r\n      .then((vrDisplays) => {\r\n        if (vrDisplays.length) {\r\n          this.display = vrDisplays[0];\r\n          return this.display;\r\n        }\r\n        return \"no\";\r\n      }, (vrDisplays) => {\r\n        return \"no\";\r\n      });\r\n  }\r\n\r\n  open() {\r\n    if (!this.display || !this.vrEffect) {\r\n      console.warn(\"未发现VR设备或浏览器不兼容，无法进入VR模式。\");\r\n      return;\r\n    }\r\n    this.app.renderLoop.add(() => {\r\n      this.vrEffect.render(this.app.world.scene, this.app.world.camera);\r\n    }, this.vrEffect.updateId);\r\n    this.display.requestPresent([{ source: this.app.renderer.domElement }]);\r\n  }\r\n\r\n  close() {\r\n    this.app.renderLoop.remove(this.vrEffect.updateId);\r\n  }\r\n}\r\n\r\nexport {\r\n  VR\r\n};","class EffectFactory {\r\n  constructor(app) {\r\n    this.app = app;\r\n    this.canvas = this.app.renderer.domElement;\r\n    this.vrEffect;\r\n  }\r\n\r\n  openVREffect() {\r\n    if (!this.vrEffect) {\r\n      this.vrEffect = new THREE.VREffect(this.app.renderer);\r\n      this.vrEffect.setSize(this.canvas.clientWidth, this.canvas.clientHeight,\r\n        false);\r\n      this.vrEffect.isOpened = false;\r\n      this.vrEffect.updateId = Symbol();\r\n    }\r\n    if (this.vrEffect.isOpened) {\r\n      return;\r\n    }\r\n    this.vrEffect.isOpened = true;\r\n    this.app.renderLoop.add(() => {\r\n      this.vrEffect.render(this.app.world.scene, this.app.world.camera);\r\n    }, this.vrEffect.updateId);\r\n  }\r\n}\r\n\r\nexport {\r\n  EffectFactory\r\n};","import { World } from './World.js';\r\nimport { APP_RUNNING, APP_STOP, APP_PAUSE } from './../constant.js';\r\nimport { LoopManager } from './LoopManager.js';\r\nimport { VR } from './VR.js';\r\nimport { EffectFactory } from './../effect/EffectFactory.js';\r\n\r\nclass App {\r\n  constructor(parent, options = {}) {\r\n    this.options = _.defaults(options, {\r\n      setCommonCSS: true,\r\n      autoStart: true\r\n    });\r\n    if (this.options.setCommonCSS) {\r\n      this.setCommonCSS();\r\n    }\r\n    this.parent = parent || document.body;\r\n    this.renderer = new THREE.WebGLRenderer();\r\n    this.world = new World(this);\r\n    this.animationFrame;\r\n    this.state = APP_STOP;\r\n    this.logicLoop = new LoopManager();\r\n    this.renderLoop = new LoopManager();\r\n    this.update = (time) => {\r\n      if (this.state === APP_RUNNING) {\r\n        this.logicLoop.update(time);\r\n        this.world.update(time);\r\n        this.renderLoop.update(time);\r\n      }\r\n      this.animationFrame = requestAnimationFrame(this.update);\r\n    };\r\n    this.renderLoop.add(() => {\r\n      this.renderer.render(this.world.scene, this.world.camera);\r\n    });\r\n\r\n    this.resize = () => {\r\n      let width = this.getWorldWidth();\r\n      let height = this.getWorldHeight();\r\n\r\n      this.world.resize(width, height);\r\n\r\n      this.renderer.setSize(width, height);\r\n      this.renderer.setPixelRatio(1);\r\n    };\r\n    window.addEventListener('resize', this.resize);\r\n    if (this.options.autoStart) {\r\n      this.start();\r\n    }\r\n    this.effectFactory = new EffectFactory(this);\r\n    this.VR = new VR(this);\r\n  }\r\n\r\n  setCommonCSS() {\r\n    document.write(\r\n      '<style>*{margin:0;padding:0} body{overflow:hidden}</style>');\r\n  }\r\n\r\n  getWorldWidth() {\r\n    return this.parent === document.body ? window.innerWidth :\r\n      this.parent.offsetWidth;\r\n  }\r\n\r\n  getWorldHeight() {\r\n    return this.parent === document.body ? window.innerHeight :\r\n      this.parent.offsetHeight;\r\n  }\r\n\r\n  start() {\r\n    if (this.state === APP_STOP) {\r\n      this.state = APP_RUNNING;\r\n      this.parent.appendChild(this.renderer.domElement);\r\n      this.resize();\r\n      this.update();\r\n    }\r\n  }\r\n\r\n  resume() {\r\n    if (this.state === APP_PAUSE) {\r\n      this.state = APP_RUNNING;\r\n    }\r\n  }\r\n\r\n  pause() {\r\n    if (this.state === APP_RUNNING) {\r\n      this.state = APP_PAUSE;\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.world.destroy();\r\n  }\r\n\r\n  openFullScreen() {\r\n    let container = this.parent;\r\n    this.isFullScreen = true;\r\n    if (container.requestFullscreen) {\r\n      container.requestFullscreen();\r\n    } else if (container.msRequestFullscreen) {\r\n      container.msRequestFullscreen();\r\n    } else if (container.mozRequestFullScreen) {\r\n      container.mozRequestFullScreen();\r\n    } else if (container.webkitRequestFullscreen) {\r\n      container.webkitRequestFullscreen();\r\n    } else {\r\n      this.isFullScreen = false;\r\n    }\r\n    return this.isFullScreen;\r\n  }\r\n\r\n  closeFullScreen() {\r\n    let container = this.parent;\r\n    this.isFullScreen = false;\r\n    if (container.exitFullscreen) {\r\n      container.exitFullscreen();\r\n    } else if (container.mozCancelFullScreen) {\r\n      container.mozCancelFullScreen();\r\n    } else if (container.webkitExitFullScreen) {\r\n      container.webkitExitFullScreen();\r\n    } else if (container.msExitFullscreen) {\r\n      container.msExitFullscreen();\r\n    } else if (container.webkitCancelFullScreen) {\r\n      container.webkitCancelFullScreen();\r\n    }\r\n    if (container.webkitExitFullScreen) {\r\n      container.webkitCancelFullScreen();\r\n    }\r\n    return this.isFullScreen;\r\n  }\r\n\r\n  toggleFullScreen() {\r\n    if (this.isFullScreen) {\r\n      this.closeFullScreen();\r\n    } else {\r\n      this.openFullScreen();\r\n    }\r\n  }\r\n}\r\n\r\nexport {\r\n  App\r\n};","import { World } from './World';\r\n\r\nclass Transitioner {\r\n  constructor(app, world, texture, options = {}) {\r\n    this.options = _.defaults(options, {\r\n      'useTexture': true,\r\n      'transition': 0,\r\n      'speed': 10,\r\n      'texture': 5,\r\n      'loopTexture': true,\r\n      'isAnimate': true,\r\n      'threshold': 0.3\r\n    });\r\n    this.app = app;\r\n    this.targetWorld = world;\r\n    this.maskTexture = texture;\r\n    this.material = new THREE.ShaderMaterial({\r\n      uniforms: {\r\n        tDiffuse1: {\r\n          value: null\r\n        },\r\n        tDiffuse2: {\r\n          value: null\r\n        },\r\n        mixRatio: {\r\n          value: 0.0\r\n        },\r\n        threshold: {\r\n          value: 0.1\r\n        },\r\n        useTexture: {\r\n          value: 1\r\n        },\r\n        tMixTexture: {\r\n          value: this.maskTexture\r\n        }\r\n      },\r\n      vertexShader: `varying vec2 vUv;\r\n        void main() {\r\n        vUv = vec2( uv.x, uv.y );\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\r\n        }`,\r\n      fragmentShader: `uniform float mixRatio;\r\n        uniform sampler2D tDiffuse1;\r\n        uniform sampler2D tDiffuse2;\r\n        uniform sampler2D tMixTexture;\r\n        uniform int useTexture;\r\n        uniform float threshold;\r\n        varying vec2 vUv;\r\n        \r\n        void main() {\r\n\r\n        vec4 texel1 = texture2D( tDiffuse1, vUv );\r\n        vec4 texel2 = texture2D( tDiffuse2, vUv );\r\n\r\n        if (useTexture==1) {\r\n\r\n        vec4 transitionTexel = texture2D( tMixTexture, vUv );\r\n        float r = mixRatio * (1.0 + threshold * 2.0) - threshold;\r\n        float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);\r\n\r\n        gl_FragColor = mix( texel1, texel2, mixf );\r\n        } else {\r\n\r\n        gl_FragColor = mix( texel2, texel1, mixRatio );\r\n\r\n        }\r\n        }`\r\n    });\r\n    let halfWidth = app.getWorldWidth() / 2;\r\n    let halfHeight = app.getWorldHeight() / 2;\r\n    this.world = new World(app, new THREE.OrthographicCamera(-halfWidth,\r\n      halfWidth, halfHeight, -halfHeight, -10, 10));\r\n\r\n    let geometry = new THREE.PlaneBufferGeometry(halfWidth * 2,\r\n      halfHeight * 2);\r\n\r\n    let quad = new THREE.Mesh(geometry, this.material);\r\n    this.world.scene.add(quad);\r\n\r\n    this.sceneA = world;\r\n    this.sceneB = app.world;\r\n\r\n    this.material.uniforms.tDiffuse1.value = this.sceneA.fbo.texture;\r\n    this.material.uniforms.tDiffuse2.value = this.sceneB.fbo.texture;\r\n\r\n    this.needChange = false;\r\n  }\r\n\r\n  setThreshold(value) {\r\n    this.material.uniforms.threshold.value = value;\r\n  }\r\n\r\n  useTexture(value) {\r\n    this.material.uniforms.useTexture.value = value ? 1 : 0;\r\n  }\r\n\r\n  setTexture(i) {\r\n    this.material.uniforms.tMixTexture.value = this.texture;\r\n  }\r\n\r\n  update() {\r\n    let value = Math.min(this.options.transition, 1);\r\n    value = Math.max(value, 0);\r\n    this.material.uniforms.mixRatio.value = value;\r\n    this.app.renderer.setClearColor(this.sceneB.clearColor || 0);\r\n    this.sceneB.update();\r\n    this.app.renderer.render(this.sceneB.scene, this.sceneB.camera, this.sceneB\r\n      .fbo, true);\r\n    this.app.renderer.setClearColor(this.sceneA.clearColor || 0);\r\n    this.sceneA.update();\r\n    this.app.renderer.render(this.sceneA.scene, this.sceneA.camera, this.sceneA\r\n      .fbo, true);\r\n    this.app.renderer.render(this.world.scene, this.world.camera, null, true);\r\n  }\r\n}\r\n\r\nexport {\r\n  Transitioner\r\n};","/**\r\n * 用于事件处理\r\n * \r\n * */\r\nclass Signal {\r\n  constructor(type) {\r\n    this.type = type;\r\n    this.functionArr = [];\r\n  }\r\n\r\n  add(func) {\r\n    if (typeof func !== 'function') {\r\n      throw new NotFunctionError();\r\n    } else {\r\n      this.functionArr.push(func);\r\n    }\r\n  }\r\n\r\n  remove(func) {\r\n    return _.remove(this.functionArr, function(n) {\r\n      return n === func;\r\n    });\r\n  }\r\n\r\n  run(event, intersect) {\r\n    this.functionArr.forEach(\r\n      (func) => {\r\n        func(event, intersect);\r\n      });\r\n  }\r\n}\r\n\r\nexport {\r\n  Signal\r\n};","import { Signal } from './Signal';\r\n\r\n/**\r\n * 由于事件处理\r\n * \r\n * */\r\nclass Events {\r\n  constructor() {\r\n    this.press = new Signal('press');\r\n    this.pressup = new Signal('pressup');\r\n    this.tap = new Signal('tap');\r\n    this.enter = new Signal('enter');\r\n    this.leave = new Signal('leave');\r\n    this.pan = new Signal('pan');\r\n    this.panleft = new Signal('panleft');\r\n    this.panright = new Signal('panright');\r\n    this.panstart = new Signal('panstart');\r\n    this.pandown = new Signal('pandown');\r\n    this.panup = new Signal('panup');\r\n  }\r\n}\r\n\r\nTHREE.Mesh.prototype.events = new Events();\r\n\r\nexport {\r\n  Events\r\n};","let _extends = ( des, src, over ) => {\r\n  let res = _extend( des, src, over );\r\n\r\n  function _extend( des, src, over ) {\r\n    let override = true;\r\n    if( over === false ) {\r\n      override = false;\r\n    }\r\n    if( src instanceof Array ) {\r\n      for( let i = 0, len = src.length; i < len; i++ )\r\n        _extend( des, src[ i ], override );\r\n    }\r\n    for( let i in src ) {\r\n      if( override || !( i in des ) ) {\r\n        des[ i ] = src[ i ];\r\n      }\r\n    }\r\n    return des;\r\n  }\r\n  for( let i in src ) {\r\n    delete res[ i ];\r\n  }\r\n  return res;\r\n};\r\n\r\nexport {\r\n  _extends\r\n};","let rndInt = ( max ) => {\r\n  return Math.floor( Math.random() * max );\r\n};\r\nexport {\r\n  rndInt\r\n};","let rndString = ( len ) => {\r\n  if( len <= 0 ) {\r\n    return '';\r\n  }\r\n  len = len - 1 || 31;\r\n  let $chars =\r\n    'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  let maxPos = $chars.length + 1;\r\n  let pwd = $chars.charAt( Math.floor( Math.random() * ( maxPos - 10 ) ) );\r\n  for( let i = 0; i < len; i++ ) {\r\n    pwd += $chars.charAt( Math.floor( Math.random() * maxPos ) );\r\n  }\r\n  return pwd;\r\n};\r\n\r\nexport {\r\n  rndString\r\n};","import { _extends as extend } from './extends';\r\nimport { rndInt } from './rndInt';\r\nimport { rndString } from './rndString';\r\n\r\nlet Util = {\r\n  extend,\r\n  rndInt,\r\n  rndString\r\n};\r\n\r\nexport {\r\n  Util\r\n};","/* eslint-disable */\r\nexport { World } from './core/World.js';\r\nexport { App } from './core/App.js';\r\nexport { LoopManager } from './core/LoopManager.js';\r\nexport { Transitioner } from './core/Transitioner.js';\r\nexport { VR } from './core/VR.js';\r\n\r\nexport { EffectFactory } from './effect/EffectFactory.js';\r\n\r\nexport { NotFunctionError } from './error/NotFunctionError.js';\r\n\r\nexport { EventManager } from './events/EventManager.js';\r\nexport { Events } from './events/Events.js';\r\nexport { Signal } from './events/Signal.js';\r\n\r\nexport { Util } from './util/Util.js';\r\n//export * from './thirdparty/three.module.js';"],"names":["NotFunctionError","extend"],"mappings":"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"}